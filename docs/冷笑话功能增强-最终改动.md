# Punchliner 冷笑话功能增强 - 最终改动

## 一、需求实现

### 1. 首页布局
```
❄️ 今日冷笑话（暗调卡片）
✨ 今日也要笑一笑（亮调卡片）
🎭 更多段子
```

### 2. 冷笑话详情页
- URL使用Base64加密（与段子详情页一致）
- 亮色调风格
- 断句逻辑（按句末符号拆分）
- 两个按钮：生成配图 + 类似冷笑话
- 类似冷笑话直接在下方显示

### 3. 图片生成
- 使用本地猫咪图片（public目录下的图片）
- 多宫格合成一张大图（纵向排列）
- 每个格子：
  - 黑色圆形背景
  - 猫咪图片居中偏上
  - 白色文字显示在下方
- 格子之间间隔10px
- 格子尺寸：340x450

---

## 二、文件改动

### 修改的文件

| 文件 | 改动 |
|------|------|
| `src/app/page.tsx` | URL使用Base64加密 |
| `src/app/cold-joke/[id]/page.tsx` | Base64解码 + 多宫格合成 |
| `src/lib/ai.ts` | 猫咪图片prompt |

### 新增的文件

| 文件 | 说明 |
|------|------|
| `public/Camera_1040g3k831n5t2j3vl2d05p4612e43ojud7380e8.jpg` | 猫咪图片1 |
| `public/Camera_1040g3k831n5t2j3vl2dg5p4612e43oju6gr8tfo.jpg` | 猫咪图片2 |

---

## 三、图片生成逻辑

```javascript
// 本地猫咪图片列表
const catImages = [
  '/Camera_1040g3k831n5t2j3vl2d05p4612e43ojud7380e8.jpg',
  '/Camera_1040g3k831n5t2j3vl2dg5p4612e43oju6gr8tfo.jpg',
]

// 格子尺寸
const CELL_WIDTH = 340
const CELL_HEIGHT = 450
const GAP = 10
```

---

## 四、测试要点

1. 冷笑话详情页URL是否为Base64加密格式
2. 点击生成配图后是否生成一张多宫格图片
3. 图片风格是否正确：黑色圆形 + 猫咪 + 白色文字
4. 宫格数量是否正确（根据句子数量）
